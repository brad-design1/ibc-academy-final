---
import Layout from '../../layouts/Layout.astro';
import ArticleFooterCTA from '../../components/ArticleFooterCTA.astro';
import { getCollection } from 'astro:content';

// Get articles related to banking function
const allArticles = await getCollection('articles');
const bankingArticles = allArticles.filter(article => 
  !article.data.draft && [
    'the-banking-function',
    'freedom-02-banking-function',
    'professional-02-banking-function-explained',
    'business-03-banking-business',
    'just-curious-04-what-banks-actually-do',
    'just-curious-06-what-if-you-were-bank',
    'real-estate-05-what-if-you-were-the-bank',
    'freedom-01-freedom-from-system',
    'deeper-01-heir-to-menger',
    'banking-vs-investing',
    'freedom-06-austrian-economics',
    'nelson-nash-byob',
  ].includes(article.id)
);

const featuredArticles = [
  {
    title: 'The Banking Function',
    description: 'Banking is a process, not a place. Understand the function that controls your financial life.',
    href: '/learn/articles/the-banking-function',
    readTime: '10 min',
  },
  {
    title: 'The Ultimate Guide to IBC',
    description: 'Master the Infinite Banking Concept from Nelson Nash\'s origin story to implementation.',
    href: '/learn/articles/ultimate-guide-what-is-ibc',
    readTime: '20 min',
    featured: true,
  },
  {
    title: 'Banking vs. Investing',
    description: 'These are two different functions. Most people confuse them ‚Äî and lose the banking function entirely.',
    href: '/learn/articles/banking-vs-investing',
    readTime: '12 min',
  },
];

const conceptArticles = [
  {
    title: 'What Banks Actually Do With Your Money',
    description: 'The mechanics of how banks profit from deposits and why you\'re on the wrong side of the equation.',
    href: '/learn/articles/just-curious-04-what-banks-actually-do',
    readTime: '8 min',
  },
  {
    title: 'What If You Were the Bank?',
    description: 'Imagine controlling the financing function instead of being a customer of it.',
    href: '/learn/articles/just-curious-06-what-if-you-were-bank',
    readTime: '9 min',
  },
  {
    title: 'Freedom From the System',
    description: 'How recapturing the banking function leads to genuine financial independence.',
    href: '/learn/articles/freedom-01-freedom-from-system',
    readTime: '10 min',
  },
  {
    title: 'The Banking Function Explained',
    description: 'A professional\'s guide to understanding why banking matters more than investing.',
    href: '/learn/articles/professional-02-banking-function-explained',
    readTime: '9 min',
  },
];

const foundationArticles = [
  {
    title: 'Heir to Menger',
    description: 'Nelson Nash\'s connection to Austrian economics and Carl Menger\'s monetary theory.',
    href: '/learn/articles/deeper-01-heir-to-menger',
    readTime: '12 min',
  },
  {
    title: 'Austrian Economics & IBC',
    description: 'The sound money principles that underpin the Infinite Banking Concept.',
    href: '/learn/articles/freedom-06-austrian-economics',
    readTime: '11 min',
  },
  {
    title: 'Nelson Nash & BYOB',
    description: 'The man who discovered IBC and the book that changed everything.',
    href: '/learn/articles/nelson-nash-byob',
    readTime: '8 min',
  },
];
---

<Layout title="The Banking Function" description="Banking is a process, not a place. Learn how to recapture the banking function in your life and become your own banker.">
  <section class="py-16 lg:py-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Header -->
      <div class="max-w-3xl mb-16">
        <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-gold/10 border border-gold/20 mb-6">
          <span class="text-gold text-sm font-medium">Learning Hub</span>
        </div>
        <h1 class="text-4xl sm:text-5xl font-extrabold text-white">
          The Banking <span class="text-gold">Function</span>
        </h1>
        <p class="mt-4 text-xl text-slate-300">
          Banking is a process, not a place. It's not the building on the corner with the marble floors ‚Äî it's the act of storing capital and deploying it for productive use. Someone performs this function in every financial transaction. The question is: who profits from it?
        </p>
        <blockquote class="mt-6 pl-4 border-l-2 border-gold/40 text-slate-300 italic">
          "You finance everything you buy. Either you pay interest to someone else, or you give up the interest you could have earned. There is no third option."
          <span class="block mt-1 text-gold text-sm not-italic">‚Äî Nelson Nash</span>
        </blockquote>
      </div>

      <!-- Featured Article -->
      <div class="mb-16">
        <a href="/learn/articles/ultimate-guide-what-is-ibc" 
           class="group block bg-gradient-to-br from-gold/10 to-gold/5 border-2 border-gold/30 hover:border-gold/50 rounded-2xl p-8 lg:p-10 transition-all duration-300">
          <div class="flex flex-col lg:flex-row lg:items-center gap-6">
            <div class="flex-1">
              <span class="inline-block text-xs font-semibold text-gold uppercase tracking-wider mb-3">Start Here</span>
              <h2 class="text-2xl lg:text-3xl font-bold text-white group-hover:text-gold transition-colors">
                The Ultimate Guide to Infinite Banking
              </h2>
              <p class="mt-3 text-slate-300 leading-relaxed">
                Master the Infinite Banking Concept from Nelson Nash's crisis in 1980 to implementing your own banking system. The complete guide to becoming your own banker.
              </p>
            </div>
            <div class="shrink-0">
              <span class="inline-flex items-center gap-2 px-6 py-3 bg-gold rounded-lg text-navy-900 font-semibold group-hover:scale-105 transition-all duration-200">
                Read the Guide
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </span>
            </div>
          </div>
        </a>
      </div>

      <!-- Core Concepts Grid -->
      <div class="mb-16">
        <h2 class="text-2xl font-bold text-white mb-6">Core Concepts</h2>
        <div class="grid md:grid-cols-2 gap-6">
          {featuredArticles.filter(a => !a.featured).map((article) => (
            <a href={article.href} class="group block bg-navy/30 border border-navy-light/20 hover:border-gold/30 rounded-xl p-6 transition-all duration-300">
              <div class="flex items-center justify-between mb-2">
                <h3 class="text-lg font-bold text-white group-hover:text-gold transition-colors">{article.title}</h3>
                <span class="text-xs text-slate-500">{article.readTime}</span>
              </div>
              <p class="text-slate-300 text-sm leading-relaxed">{article.description}</p>
            </a>
          ))}
        </div>
      </div>

      <!-- Understanding the Function -->
      <div class="mb-16">
        <h2 class="text-2xl font-bold text-white mb-6">Understanding the Function</h2>
        <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-5">
          {conceptArticles.map((article) => (
            <a href={article.href} class="group block bg-navy/30 border border-navy-light/20 hover:border-gold/30 rounded-xl p-5 transition-all duration-300">
              <div class="flex items-center justify-between mb-2">
                <span class="text-xs text-slate-500">{article.readTime}</span>
              </div>
              <h3 class="text-base font-semibold text-white group-hover:text-gold transition-colors mb-2">{article.title}</h3>
              <p class="text-slate-400 text-sm leading-relaxed line-clamp-2">{article.description}</p>
            </a>
          ))}
        </div>
      </div>

      <!-- Austrian Economics Foundation -->
      <div class="mb-16">
        <h2 class="text-2xl font-bold text-white mb-6">The Economic Foundation</h2>
        <div class="grid md:grid-cols-3 gap-6">
          {foundationArticles.map((article) => (
            <a href={article.href} class="group block bg-navy/30 border border-navy-light/20 hover:border-gold/30 rounded-xl p-6 transition-all duration-300">
              <div class="flex items-center justify-between mb-2">
                <span class="text-xs text-slate-500">{article.readTime}</span>
              </div>
              <h3 class="text-lg font-bold text-white group-hover:text-gold transition-colors mb-2">{article.title}</h3>
              <p class="text-slate-300 text-sm leading-relaxed">{article.description}</p>
            </a>
          ))}
        </div>
      </div>

      <!-- Related Hubs -->
      <div class="mb-16 p-8 bg-navy/20 border border-navy-light/10 rounded-2xl">
        <h2 class="text-xl font-bold text-white mb-4">Continue Learning</h2>
        <div class="grid sm:grid-cols-3 gap-4">
          <a href="/learn/policy-mechanics" class="group flex items-center gap-3 p-4 bg-navy/30 border border-navy-light/20 hover:border-gold/30 rounded-xl transition-all">
            <span class="text-2xl">‚öôÔ∏è</span>
            <div>
              <span class="text-white font-semibold group-hover:text-gold transition-colors">Policy Mechanics</span>
              <p class="text-slate-500 text-xs">How policies actually work</p>
            </div>
          </a>
          <a href="/learn/compared-to-what" class="group flex items-center gap-3 p-4 bg-navy/30 border border-navy-light/20 hover:border-gold/30 rounded-xl transition-all">
            <span class="text-2xl">‚öñÔ∏è</span>
            <div>
              <span class="text-white font-semibold group-hover:text-gold transition-colors">Compared to What?</span>
              <p class="text-slate-500 text-xs">IBC vs alternatives</p>
            </div>
          </a>
          <a href="/learn/case-studies" class="group flex items-center gap-3 p-4 bg-navy/30 border border-navy-light/20 hover:border-gold/30 rounded-xl transition-all">
            <span class="text-2xl">üìä</span>
            <div>
              <span class="text-white font-semibold group-hover:text-gold transition-colors">Case Studies</span>
              <p class="text-slate-500 text-xs">Real-world examples</p>
            </div>
          </a>
        </div>
      </div>

      <!-- CTA Section -->
      <div class="max-w-3xl mx-auto">
        <ArticleFooterCTA />
      </div>
    </div>
  </section>
</Layout>
